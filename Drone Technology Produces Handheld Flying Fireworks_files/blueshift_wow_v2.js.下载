"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){try{console.log("BlueShift");var e,t=window.location.pathname,r=new RegExp(/^(93|355|213|684|376|244|809|268|54|374|297|247|61|672|43|994|242|246|973|880|375|32|501|229|975|284|591|387|267|55|673|359|226|257|855|237|238|345|236|235|56|86|886|57|269|682|506|385|53|357|420|45|767|253|593|20|503|240|291|372|251|500|298|679|358|33|596|594|241|220|995|49|233|350|30|299|473|671|502|224|245|592|509|504|852|36|354|91|62|98|964|353|972|39|225|876|81|962|7|254|686|82|850|965|996|371|856|961|266|231|370|218|423|352|853|389|261|265|60|960|223|356|692|222|230|52|691|373|976|212|258|95|264|674|977|31|599|869|687|64|505|227|234|683|1670|47|968|92|680|507|675|595|51|63|48|351|1787|974|262|40|250|670|378|239|966|221|381|248|232|65|421|386|677|252|27|34|94|290|508|249|597|46|41|963|689|255|66|228|690|676|1868|216|90|993|688|256|380|971|44|598|1|678|58|84|1340|681|685|967|243|260|263)\d+/),o=function(e){return r.test(e)},n=function(e){var t="";location.href.indexOf("?")&&(t=location.href.substr(location.href.indexOf("?")));var r=t.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return r?r[1]:null},i=function(){return(new Date).toISOString()},a=function(){var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},c=!1,l="",d="",u="",s=!0,w=JSON.parse(window.__CTR_FP_TRACKING_SETTINGS.FP_TRACKING_CUSTOM_DATA).campaignName,p=!1,m="",f=n("guid"),g=function(){var e=window.ctrwowCheckout.checkoutData.getProduct(),t=window.localStorage.getItem("doubleQuantity")?e.quantity/2:e.quantity;return{products:[{productId:e.productId,sku:e.sku,total_usd:(e.productPrices.DiscountedPrice.Value+e.shippings[window.shippingIndex||0].price).toFixed(2),quantity:t}],sku:e.sku}},h=function(){try{var e={firstname:document.querySelector('[name="firstName"]').value||"",lastname:document.querySelector('[name="lastName"]').value||"",ship_city:document.querySelector('[name="city"]').value,ship_address:document.querySelector('[name="address1"]').value,ship_state:document.querySelector('[name="state"]').value,ship_zip:document.querySelector('[name="zipCode"]').value,ship_country:document.querySelector('[name="countryCode"]').value,customer_language:document.querySelector("html").getAttribute("lang")||"",joined_at:i(),fingerprint_id:window._EA_ID,referrer:document.referrer};return window.CC_Code&&(e.coupon=window.CC_Code),c&&(e=_objectSpread(_objectSpread({},e),{},{phone_number:u||document.querySelector('[name="phoneNumber"]').value,phone_valid:c,phone_linetype:l,phone_carrier:d})),s||(e=_objectSpread(_objectSpread({},e),{},{email:document.querySelector('[name="email"]').value})),e}catch(e){return console.log(e),{}}},_=function(e){try{var t=window.localStorage.getItem("realDoubleQuantity")?e.quantity/2:e.quantity,r=window.location.href,o=r.split("?")[0];return{email:document.querySelector('[name="email"]').value||"",product_ids:[e.productId],items:[{productId:e.productId,sku:e.sku,total_usd:(e.productPrices.DiscountedPrice.Value+e.shippings[window.shippingIndex||0].price).toFixed(2),quantity:t}],sku:e.sku,currency:window.localStorage.getItem("currencyCode"),landing_base_url:o,customer_language:document.querySelector("html").getAttribute("lang")||""}}catch(e){return console.log(e),{}}},y=function(e){if(e){var t=e.value&&!e.classList.contains("error"),r="https://sales-prod.tryemanagecrm.com/api/validation/verify-email/?email=".concat(e.value);t&&window.ctrwowUtils.callAjax(r,{headers:{X_CID:window.__CTRWOW_CONFIG.X_CID,"Content-Type":"application/json"}}).then(function(e){if(!e)throw"Error";if(e.isVerified&&e.isValid){window.ctrwowUtils.events.emit("onValidEmail"),window.localStorage.removeItem("isInvalidEmail"),s=!1;var t=h();blueshift.identify(t);var r=window.ctrwowCheckout.checkoutData.getProduct(),o=_(r);blueshift.track("add_to_cart",o)}else window.localStorage.setItem("isInvalidEmail",!0),s=!0}).catch(function(e){window.localStorage.setItem("isInvalidEmail",!0),s=!0,console.log(e)})}},v=function(){var t=h();if(t.guid=f,!s){blueshift.identify(t);var r=window.ctrwowCheckout.checkoutData.getProduct(),o=_(r);o.one_click_purchase_reference=f,blueshift.track("add_to_cart",o)}for(var n=g(),i=n.products,a=[],c=0,l=i.length;c<l;c++)a.push(i[c].productId);blueshift.track("checkout",{one_click_purchase_reference:f,fingerprintId:window._EA_ID,referrer:document.referrer,countryCode:t.ship_country,regionCode:t.ship_state,ip:e.location.ip,product_ids:a,items:i,sku:n.sku,currency:window.localStorage.getItem("currencyCode")})},b=function(){var e=JSON.parse(window.localStorage.getItem("prevItem")),t=window.localStorage.getItem("orderInfo"),r=window.localStorage.getItem("userPaymentType"),o=window.localStorage.getItem("location");if(e){for(var n=window.localStorage.getItem("doubleQuantity")?e.quantity/2:e.quantity,c=[{productId:e.productId,sku:e.sku,total_usd:(e.productPrices.DiscountedPrice.Value+e.shippings[window.shippingIndex||0].price).toFixed(2),quantity:n}],l=e.sku,d=[],u=0,s=c.length;u<s;u++)d.push(c[u].productId);var w=window.location.href,p=w.split("?")[0],m={order_create_date:i(),ip_address:o.ip||"",internal_campaignname:e.campaignName,device_type:a(),device_vendor:window.navigator.vendor,campaignname:e.campaignName,landingurl:w,landing_base_url:p,referringurl:document.referrer,parentcampaign:window.localStorage.getItem("mainCampaignName"),product_ids:d,items:c,sku:l};return t&&(m=_objectSpread(_objectSpread({},m),{},{order_id:t.orderNumber,customer_id:t.customerId,customer_language:document.querySelector("html").getAttribute("lang")||""})),"creditcard"===r&&f&&(m.one_click_purchase_reference=f),m}return!1};window._blueshiftid="1"===n("isCardTest")?"fa8307145a64f9484defb6d8a18940f0":"13c25a652e2a0c05cb06a3b1dba09a85",window.blueshift=window.blueshift||[],blueshift.constructor===Array&&(blueshift.load=function(){for(var e=["identify","track","click","pageload","capture","retarget","presale_load","interstitial_load","upsell_load"],t=0;t<e.length;t++)blueshift[e[t]]=function(e){return function(){blueshift.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(e[t])}),blueshift.load(),blueshift.pageload(),t.indexOf("/pre")>-1&&blueshift.presale_load(),t.indexOf("/index")>-1&&blueshift.interstitial_load(),t.indexOf("/special-offer-")>-1&&blueshift.upsell_load();var S=function(){blueshift.constructor===Array&&function(){var e=document.createElement("script");e.type="text/javascript",e.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.getblueshift.com/blueshift.js",e.defer=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()},I=function(){try{window.localStorage.removeItem("isFiredMainOrderBlueshift"),e=window.__productListData.data.productList;var t=window.__checkoutData.data.product;if(!e||!window._EA_ID||p||!t)return;console.log("BlueShift",e,window._EA_ID),p=!0;var r=Array.prototype.slice.call(document.querySelectorAll('[name="email"], [name="firstName"], [name="lastName"], [name="phoneNumber"]')),i=h(),a=$('input[name="phoneNumber"]'),S=document.querySelector('[name="shippingAddress"] [name="countryCode"]'),I=!1,k=!1,O=function e(t){try{var r=a.val().match(/\d/g);if(!r)return;r=r.join("");var w="//apilayer.net/api/validate?access_key=755a648d3837cf3adb128f29d322879a&number=".concat(r),p=o(r);window.localStorage.getItem("ctr__countryCode")&&(m=window.localStorage.getItem("ctr__countryCode")),S&&S.value&&(m=S.value),m&&(p&&!k||(w="//apilayer.net/api/validate?access_key=755a648d3837cf3adb128f29d322879a&number=".concat(r,"&country_code=").concat(m.toLowerCase()))),"1"===n("validPhone")&&a.rules("remove","cphone"),window.ctrwowUtils.callAjax(w).then(function(r){if(r.valid&&(window.phoneRes=r),r.country_code.toLowerCase()!==m.toLowerCase()&&!k)return k=!0,void e();if(k&&!r.valid&&window.phoneRes&&(r=_objectSpread({},window.phoneRes)),c=r.valid,l=r.line_type,d=r.carrier,c?(a.addClass("correct-phone"),u=r.international_format,i=h(),s||blueshift.identify(i)):"1"===n("validPhone")&&a.removeClass("correct-phone"),"1"===n("validPhone")){if(r.country_code&&S.value.toLowerCase()!==r.country_code.toLowerCase()&&S.querySelector('option[value="'.concat(r.country_code,'"]'))&&!t){I=!0,S.value=r.country_code,S.dispatchEvent(new Event("change"));$('form[name="shippingAddress"]').validate().element(S)}a.rules("add",{cphone:!0});$('form[name="customer"]').validate().element(a),I=!1}}).catch(function(e){console.log(e)})}catch(e){console.log(e)}};S&&S.addEventListener("change",function(){I||O(!0)}),f&&(O(),y(window._q('input[name="email"]'))),r.forEach(function(e){e.addEventListener("blur",function(e){try{i=h(),"email"===e.currentTarget.getAttribute("name")&&e.currentTarget.classList.contains("valid")&&window.currentEmail!==e.currentTarget.value&&(console.log("BlueShift - Fire identify"),window.currentEmail=e.currentTarget.value,y(e.currentTarget)),"phoneNumber"===e.currentTarget.getAttribute("name")&&window.currentPhone!==e.currentTarget.value&&(window.currentPhone=e.currentTarget.value,k=!1,O())}catch(e){console.log(e)}})}),window.pauseCheckoutProcessing={isPause:!0,delay:500},document.querySelector("body").insertAdjacentHTML("beforeend",'<span class="custom-loading" style="display: none;"></span>'),window.ctrwowUtils.events.on("afterSubmitOrder",function(e){e&&e.referenceId&&e.useCreditCard&&(f=e.referenceId,v())}),window.ctrwowUtils.events.on("declinePayment",function(){if(f){var e=b();e&&blueshift.track("decline",e)}}),window.ctrwowUtils.events.on("onAfterActivePopup",function(){try{window.CC_Code=window.ctrwowCheckout.checkoutData.getCouponCode(),i=h(),s||blueshift.identify(i)}catch(e){console.log(e)}}),window.ctrwowUtils.events.on("beforeSubmitOrder",function(){try{i=h(),s||blueshift.identify(i),window.localStorage.setItem("identifyData",JSON.stringify(i));var t=window.ctrwowCheckout.checkoutData.getProduct();t.campaignName=w,window.localStorage.setItem("prevItem",JSON.stringify(t)),console.log("BlueShift - Fire checkout");for(var r=g(),o=r.products,n=[],a=0,c=o.length;a<c;a++)n.push(o[a].productId);blueshift.track("checkout",{fingerprintId:window._EA_ID,referrer:document.referrer,countryCode:i.ship_country,regionCode:i.ship_state,ip:e.location.ip,product_ids:n,items:o,sku:r.sku,currency:window.localStorage.getItem("currencyCode")})}catch(e){console.log(e)}}),window.localStorage.setItem("location",JSON.stringify(e.location)),window.ctrwowCheckout.checkoutData.onProductChange(function(){try{var e=window.ctrwowCheckout.checkoutData.getProduct();if(e.productId===t.productId)return;var r=_(t),o=_(e);document.querySelector('[name="email"]')&&document.querySelector('[name="email"]').classList.contains("valid")&&(s||(blueshift.track("remove_from_cart",r),blueshift.track("add_to_cart",o))),t=window.ctrwowCheckout.checkoutData.getProduct()}catch(e){console.log(e)}})}catch(e){console.log("Warning: orderPageEvents")}},k=function(){try{if(S(),window.location.href.indexOf("/order")>-1){I();var e=0,r=setInterval(function(){e++,window.__productListData&&window.__productListData.data&&window.__productListData.data.productList&&window._EA_ID&&(I(),clearInterval(r)),50===e&&clearInterval(r)},300);return}var o=window.localStorage.getItem("orderInfo"),n=window.localStorage.getItem("location"),c=window.localStorage.getItem("isInvalidEmail"),l=window.localStorage.getItem("isFiredMainOrderBlueshift"),d=window._EA_ID||window.localStorage.getItem("_vid");window.localStorage.getItem("referrerUrl")||window.localStorage.setItem("referrerUrl",document.referrer);var u=function(e,t){try{var r=e.orderNumber,o=window.localStorage.getItem("doubleQuantity")?Math.ceil(e.quantity/2):e.quantity,c=Number(e.orderTotalFull),l=[{productId:e.orderedProducts[0].pid,sku:e.orderedProducts[0].sku,total_usd:e.orderTotalFull,quantity:o}],d=e.orderedProducts[0].sku;if(e.upsellUrls&&e.upsellUrls.length>0)for(var u=0,s=e.upsellUrls.length;u<s;u++)"fired"===e.upsellUrls[u].isFired&&(c+=e.upsellUrls[u].price);t&&(r=e.orderNumber,w=t.campaignName,l=[{productId:t.orderedProducts[0].pid,sku:t.orderedProducts[0].sku,total_usd:t.price,quantity:t.orderedProducts[0].quantity}],d=t.orderedProducts[0].sku);for(var p=[],m=0,f=l.length;m<f;m++)p.push(l[m].productId);var g=window.location.href,h=g.split("?")[0];return{order_id:r,customer_id:e.customerId,email:e.cusEmail,order_create_date:i(),ip_address:n.ip||"",customer_language:document.querySelector("html").getAttribute("lang")||"",device_type:a(),device_vendor:window.navigator.vendor,campaignname:w,internal_campaignname:w,landingurl:g,landing_base_url:h,referringurl:document.referrer,parentcampaign:window.localStorage.getItem("mainCampaignName"),product_ids:p,items:l,sku:d,revenue:c.toFixed(2),currency:window.localStorage.getItem("currencyCode")}}catch(e){return console.log(e),{}}};if(o&&d){o=JSON.parse(o),n=JSON.parse(n||"{}");var s=window.localStorage.getItem("identifyData");if(s&&(s=JSON.parse(s),s.customer_id||(s.customer_id=o.customerId),window.localStorage.setItem("identifyData",JSON.stringify(s)),"true"!==c&&blueshift.identify(s)),l){if(o.upsellUrls&&o.upsellUrls.length>0){var p=o.upsellUrls.length-1,m=o.upsellUrls[p],f=localStorage.getItem("subOrderNumber");o.upsellUrls[p].isFired||o.upsellUrls[p].orderNumber===f||(o.upsellUrls[p].isFired="fired",console.log("BlueShift - Fire Purchase"),"true"!==c&&blueshift.track("purchase",u(o,m)))}}else console.log("BlueShift - Fire Purchase"),o.upsellUrls&&o.upsellUrls.length>0&&localStorage.setItem("subOrderNumber",o.upsellUrls[0].orderNumber),"true"!==c&&blueshift.track("purchase",u(o)),window.localStorage.setItem("isFiredMainOrderBlueshift",!0);window.localStorage.setItem("orderInfo",JSON.stringify(o))}if(window.ctrwowUtils.events.on("onBeforePlaceUpsellOrder",function(){var e=window.ctrwowUpsell.productListData.getProductList().prices[window.upsell_productindex];e.campaignName=w,window.localStorage.setItem("prevItem",JSON.stringify(e))}),t.indexOf("decline")>-1){var g=b();g&&blueshift.track("decline",g)}}catch(e){console.log(e)}},O=function(){try{var e={en:"Please enter a international phone number or update your country.",de:"Bitte geben Sie eine gültige Telefonnummer ein.",fr:"Veuillez saisir un numéro de téléphone valide.",jp:"有効な電話番号を入力してください。",cn:"请输入有效电话号码。",br:"Por favor insira um telefone válido.",es:"Por favor introduzca un número de teléfono válido.",pt:"Por favor insira um número de telefone válido."};window.phoneMsg=e.en;var t=window.location.pathname;t.indexOf("/de/")>-1&&(window.phoneMsg=e.de),t.indexOf("/fr/")>-1&&(window.phoneMsg=e.fr),t.indexOf("/jp/")>-1&&(window.phoneMsg=e.jp),t.indexOf("/cn/")>-1&&(window.phoneMsg=e.cn),t.indexOf("/br/")>-1&&(window.phoneMsg=e.br),t.indexOf("/es/")>-1&&(window.phoneMsg=e.es),t.indexOf("/pt/")>-1&&(window.phoneMsg=e.pt),$.validator.addMethod("cphone",function(e,t){return $(t).hasClass("correct-phone")},window.phoneMsg)}catch(e){console.log(e)}};window.addEventListener("load",function(){k(),"1"===n("validPhone")&&O()})}catch(e){console.log(e)}}();